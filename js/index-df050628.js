import{d as r}from"./vendor-7fe3a1dd.js";import{C as i}from"./index-f69f1a05.js";import{M as o,n as c}from"./index-8abb1e0a.js";const l={name:"Friend",components:{Comment:i,Markdown:o},data(){return{filterFriends:[],loseContact:[],notAdded:[],loading:!0}},computed:{friendInfo(){return`\`\`\`js
name: ${this.$config.name}
url: ${this.$config.url}
avatar: ${this.$config.avatar}
desc: ${this.$config.desc}
\`\`\``},friendLink(){let n="https://github.com/";return n+=`${this.$config.username}/${this.$config.friendsRepo}/issues`,n},showLoseContact(){return this.loseContact.length>0},showNotAdded(){return this.notAdded.length>0}},created(){this.getFriendsFn()},methods:{...r({getFriendsCountAction:"github/getFriendsCountAction",getFriendsAction:"github/getFriendsAction"}),parseFriends(n){n.forEach(s=>{const e=s.labels.map(a=>a.name);e.includes("未添加")?this.notAdded.push(s):e.includes("失联")?this.loseContact.push(s):this.filterFriends.push(s)})},async getFriendsCountFn(){return await this.getFriendsCountAction().catch(n=>{throw this.$message({content:"获取友链总数失败",type:"error"}),new Error(n)})},async getFriendsFn(){const n=await this.getFriendsCountFn().catch(t=>{throw this.$message({content:"获取友链总数失败",type:"error"}),new Error(t)}),s=await this.getFriendsAction({page:1,pageSize:n}).catch(t=>{throw this.$message({content:"获取友链失败",type:"error"}),new Error(t)}).finally(()=>{this.loading=!1});this.parseFriends(s)}}};var d=function(){var s=this,t=s._self._c;return t("div",{staticClass:"friend-wrap"},[t("div",{staticClass:"friend"},[t("section",[t("h2",[t("SvgIcon",{attrs:{name:"lianjie"}}),s._v(" 我的友链信息")],1),t("div",{staticClass:"info-wrap"},[t("p",[s._v("欢迎各位大佬交换友链 (づ￣ 3￣)づ")]),t("p",[s._v("以下是我的友链信息，各位大佬可以在页面下按照这个格式留言，或者前往 "),t("a",{attrs:{href:s.friendLink}},[s._v("Friend")]),s._v(" 自行创建")]),t("Markdown",{attrs:{content:s.friendInfo,"need-parsed":!0}})],1)]),t("section",[t("h2",[t("SvgIcon",{attrs:{name:"zhinan"}}),s._v(" 小伙伴们")],1),t("p",[s._v("※ 以下友链友链随机排序，博主将不定期更新排序并过滤阵亡名单")]),t("p",[s._v("※ 为了页面视觉体验，头像将保存到博主自己的存储空间，如果有更新请即时联系博主修改")]),t("ul",{directives:[{name:"loading",rawName:"v-loading",value:s.loading,expression:"loading"}],staticClass:"content"},s._l(s.filterFriends,function(e){return t("li",{key:e.number},[t("a",{staticClass:"info",attrs:{href:e.url,rel:"noopener noreferrer",target:"_blank"}},[t("figure",{staticClass:"avatar"},[t("img",{attrs:{src:e.avatar,alt:"avatar",loading:"lazy"}})]),t("div",{staticClass:"text"},[t("h3",{staticClass:"name"},[s._v(s._s(e.name))]),t("p",{staticClass:"desc"},[s._v(s._s(e.desc))])])])])}),0)]),s.showLoseContact?t("section",[t("p",{staticClass:"strong"},[s._v(" 失联的小伙伴们 ")]),t("ul",{staticClass:"content"},s._l(s.loseContact,function(e){return t("li",{key:e.number},[t("a",{staticClass:"info",attrs:{href:e.url,rel:"noopener noreferrer",target:"_blank"}},[t("figure",{staticClass:"avatar"},[t("img",{attrs:{src:e.avatar,alt:"avatar",loading:"lazy"}})]),t("div",{staticClass:"text"},[t("h3",{staticClass:"name"},[s._v(s._s(e.name))]),t("p",{staticClass:"desc"},[s._v(s._s(e.desc))])])])])}),0),t("p",[s._v("请以上失联的小伙伴尽快恢复网站的正常访问，并且通知博主")])]):s._e(),s.showNotAdded?t("section",[t("p",{staticClass:"strong"},[s._v(" 未添加本站的小伙伴们 ")]),t("ul",{staticClass:"not-added"},s._l(s.notAdded,function(e){return t("li",{key:e.number},[t("h3",{staticClass:"name"},[s._v(" "+s._s(e.name)+" ")])])}),0),t("p",[s._v("如果需要本博客继续收录您的站点，请于您的站点添加本站后联系博主")])]):s._e()]),t("Comment")],1)},u=[],_=c(l,d,u,!1,null,"7510a778",null,null);const v=_.exports;export{v as default};
